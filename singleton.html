<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Singleton Pattern in Javascript</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

        <script type="text/javascript">
			// Singleton pattern - Stoyan Stefanov
			function Universe() {
				// the cached instance
				var instance;
				
				// rewrite the constructor
				Universe = function Universe() {
					return instance;
				};
				
				// carry over the prototype properties
				Universe.prototype = this;
				
				// the instance
				instance = new Universe();
				
				// reset the contructor pointer
				instance.constructor = Universe;
				
				// functionality
				instance.start_time = 0
				instance.bang = "Big";
				
				return instance;
			}
			
			// update prototype a create instance
			Universe.prototype.nothing = true; // true
			var uni = new Universe();
			Universe.prototype.everything = true; // true
			var uni2 = new Universe();
			
			// same instance
			uni === uni2; // true
			
			// all prototype properties work
			// no matter when they were defined
			uni.nothing && uni.everything && uni2.nothing && uni2.everything; // true
			// the normal properties work
			uni.bang; // "Big"
			// the constructor points correctly
			uni.constructor === Universe; // true
			

			// Singleton pattern in Javascript with private member - Stoyan Stefanov
			var Universe;
			
			function() {
				
				var instance;
				
				Universe = function Universe() {
					
					if (instance) {
						return instance;
					}
					
					instance = this;
					
					// functionality
					this.start_time = 0;
					this.bang = "Big";
				};
				
			}());
        </script>
    </head>
    <body>
    	<h1>Singleton Pattern in Javascript</h1>
    </body>
</html>